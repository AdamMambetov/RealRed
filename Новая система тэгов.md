# Новая система тэгов

## RR_TagManager_AC

Находится в `/All/Plugins/RR_Core/Components/Managers`. Является заменой _TAG_Manager_Estate_AC_. В нём хранятся текущие тэги (Лейер, Раздел и т.д.) и стейджи (Дом, Квартира, Вид из окон и т.д.). Должен быть добавлен к GameMode проекта. Все его методы добавлены в категорию _TagManager_.
![[Pasted image 20251106145752.png]] 


### Работа с тэгами

Для добавления, изменения и удаления тэгов есть 4 функции:
![[Pasted image 20251106152916.png]]

1. AddTag - Добавляет указанный тэг. Replace - заменить уже существующий тэг на этот.
	- Пример: В Тэг Менеджере есть _RR Layer.Генплан_. Если вызвать эту функцию с Replace = false и Tag = _RR Layer.Местоположение_, то в Тэг Менеджере будут тэги _RR Layer.Генплан_, _RR Layer.Местоположение_. А если Replace = true, то будет только тэг _RR Layer.Местоположение_.
	- Как он понимает какие тэги надо удалить? Он ищет в переменной _MessageTags_ по неполному сравнению корневой тэг (у _RR Layer.Генплан_ это _RR Layer_) и он удаляет все тэги, у которых есть этот корневой тэг.
2. AddTags - Добавляет указанные тэги. Replace - заменить уже существующий тэг на эти.
3. RemoveTag - Удаляет указанный тэг. Exact Remove - удалить по точному сравнению (такой же параметр есть у функции Matches Tag).


